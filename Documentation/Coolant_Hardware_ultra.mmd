---
title: Hardware Flowchart
config:
  layout: elk
  elk:
    mergeEdges: true
    nodePlacementStrategy: LINEAR_SEGMENTS
---

flowchart
%%Analog in
    A0[[A0]]
    %%A1[[A1]]
    %%A2[[A2]]
    %%A3[[A3]]
    %%A4[[A4]]
    %%A5[[A5]]
%%Digital in
    %%D1((D1))
    D2((D2))
    D3((D3))
    D4((D4))
    D5((D5))
    %%D6((D6))
    %%D7((D7))
    %%D8((D8))
    %%D9((D9))
    D10((D10))
    D11((D11))
    D12((D12))
    D13((D13))
    SDA[SDA]
    SCL[SCL]
MCU@{shape: card ,label: "Arduino UNO\ncontroller"}
HWMIN@{shape: event ,label: "MIN level sensor"}
HWMAX@{shape: event ,label: "MAX level sensor"}
HWSD@{shape: disk ,label: "SD card"}
HWFLOW@{shape: ,label: "Flowmeter pulses"}
HWPH@{shape: ,label: "pH sensor analog"}
HWRTC@{shape: ,label: "RTC time"}
I2C@{shape: ,label: "I2C HUB"}
HWRELAY@{shape: ,label: "Relay module"}
HWVALVE@{shape: ,label: "12V solenoid valve"}
subgraph Hardware
        HWMIN -->|digital| D3
        D3-->|digital| MCU
        HWMAX -->|digital| D2
        D2 -->|digital| MCU
        HWFLOW -->|interrupt| D5
        D5 -->|interrupt| MCU
        HWPH -->|analog| A0
        A0 -->|analog| MCU
        HWRTC -->|I2C|I2C
        HWSD -->|SPI Chip Select| D10
        HWSD -->|SPI MOSI| D11
        HWSD -->|SPI MISO| D12
        HWSD -->|SPI SCK| D13
        D10 -->|SPI| MCU
        D11 -->|SPI| MCU
        D12 -->|SPI| MCU
        D13 -->|SPI| MCU
        
        MCU -->D4
        D4 -->|control|HWRELAY
        HWRELAY -->|switch 12V| HWVALVE
        I2C --> SDA
        I2C --> SCL
        SDA --> MCU
        SCL --> MCU
    end

